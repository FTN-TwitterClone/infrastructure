upstream auth {
    server auth:8000;
}

upstream social-graph {
    server social-graph:8000;
}

server {

    listen 8000 default_server;

    add_header Content-Type application/json;
    add_header Access-Control-Allow-Origin *;

    location /api/auth/ {
        proxy_pass http://auth;
        rewrite ^/api/auth/(.*)$ /$1 break;
    }

    location /api/social-graph/ {
        proxy_pass http://social-graph;
        rewrite ^/api/social-graph/(.*)$ /$1 break;
    }
}
